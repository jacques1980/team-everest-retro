
<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PI Planning BI Schade Particulieren PI26.1</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      background-image: url('BI Particulieren Team.jpg');
      background-size: cover;
      background-position: center 25%;
      background-repeat: no-repeat;
      margin: 0;
      padding: 0;
      overflow: hidden;
    }

    /* ---------------- HEADER ONDERAAN ---------------- */
    .header-box {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
      padding: 20px;
      background: rgba(255, 255, 255, 0.85);
      border-radius: 12px;
      width: 90%;
      max-width: 800px;
      z-index: 999;
    }

    h1 {
      margin: 0 0 6px 0;
      font-size: 1.8em;
      color: #111;
    }

    .controls {
      display: flex;
      gap: 8px;
      justify-content: center;
      flex-wrap: wrap;
      margin-top: 6px;
    }
    .button {
      padding: 8px 14px;
      font-size: 0.95em;
      cursor: pointer;
      border: 1px solid #d1d5db;
      background-color: #f3f4f6;
      color: #111;
      border-radius: 8px;
      transition: background-color 0.15s ease, transform 0.05s ease;
    }
    .button:hover { background-color: #e5e7eb; transform: translateY(-1px); }
    .button.primary { background: #dbeafe; border-color: #93c5fd; }
    .button.primary:hover { background: #bfdbfe; }
    .button.reset { background-color: #fee2e2; border-color: #fca5a5; }
    .button.reset:hover { background-color: #fecaca; }

    .hint { margin-top: 6px; color: #374151; font-size: 0.9em; }

    .done-list {
      margin-top: 8px;
      font-size: 0.95em;
      color: #222;
    }

    /* ---------------- MARKERS OP PERSONEN ---------------- */
    .person-marker {
      position: absolute;
      font-size: 2.6em;
      cursor: pointer;
      color: #ffec66; /* warm geel voor zichtbaarheid */
      user-select: none;
      transition: transform 0.2s ease, color 0.2s ease, text-shadow 0.2s ease;
      /* Glow animatie voor niet-afgevinkte personen */
      animation: glowPending 1.6s ease-in-out infinite;
    }
    .person-marker:hover { transform: scale(1.25); }

    /* Glow voor ‚ùì (pending) */
    @keyframes glowPending {
      0%, 100% {
        text-shadow:
          0 0 6px rgba(255, 255, 0, 0.75),
          0 0 18px rgba(255, 255, 0, 0.6),
          0 0 28px rgba(255, 200, 0, 0.4);
      }
      50% {
        text-shadow:
          0 0 12px rgba(255, 255, 0, 1),
          0 0 26px rgba(255, 255, 0, 0.9),
          0 0 36px rgba(255, 210, 0, 0.7);
      }
    }

    /* Als iemand al is geweest ‚Üí groene check + groene glow */
    .person-marker.done {
      color: #22c55e;
      animation: glowDone 1.6s ease-in-out infinite;
    }
    @keyframes glowDone {
      0%, 100% {
        text-shadow:
          0 0 6px rgba(34, 197, 94, 0.75),
          0 0 18px rgba(34, 197, 94, 0.6),
          0 0 28px rgba(34, 197, 94, 0.4);
      }
      50% {
        text-shadow:
          0 0 12px rgba(34, 197, 94, 1),
          0 0 26px rgba(34, 197, 94, 0.9),
          0 0 36px rgba(34, 197, 94, 0.7);
      }
    }

    /* ---------------- MODAL ---------------- */
    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.45);
      backdrop-filter: blur(2px);
      z-index: 9999;
      display: grid;
      place-items: start center;
      padding-top: 8vh;
    }
    .modal {
      width: min(92vw, 680px);
      background: #fff;
      color: #111;
      border-radius: 12px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.35);
      padding: 18px;
    }
    .modal h2 { margin: 0 0 8px 0; font-size: 1.35em; }
    .modal p  { margin: 0 0 16px 0; font-size: 1.1em; }
    .modal .row { display: flex; justify-content: flex-end; gap: 8px; }
    .modal .button.primary { background: #dbeafe; border-color: #93c5fd; }
    .modal .button.primary:hover { background: #bfdbfe; }
  </style>
</head>

<body>

  <!-- ---------------- HEADER ONDERAAN ---------------- -->
  <div class="header-box">
    <h1>PI Planning BI Schade Particulieren PI26.1</h1>
    <p>Klik op een ‚ùì boven een persoon, of kies willekeurig.</p>
    <div class="controls">
      <button class="button primary" onclick="randomPick()">Kies willekeurig (R)</button>
      <button class="button reset" onclick="resetProgress()">Reset verloop (checkmarks)</button>
      <button class="button" onclick="resetAll()">Helemaal opnieuw</button>
    </div>
    <div class="hint">Sneltoets: druk op <strong>R</strong> voor willekeurige naam.</div>
    <div class="done-list">
      <strong>Al geweest:</strong> <span id="doneList">‚Äî</span>
    </div>
  </div>

  <!-- ---------------- PERSON MARKERS ---------------- -->
  <div class="person-marker" id="marker-Evert"     style="top: 12%; left: 6%;"  onclick="askPerson('Evert')">‚ùì</div>
  <div class="person-marker" id="marker-Stef"      style="top: 4%;  left: 5%;"  onclick="askPerson('Stef')">‚ùì</div>
  <div class="person-marker" id="marker-Esther"    style="top: 6%;  left: 13%;" onclick="askPerson('Esther')">‚ùì</div>
  <div class="person-marker" id="marker-Ronald"    style="top: 3%;  left: 19%;" onclick="askPerson('Ronald')">‚ùì</div>
  <div class="person-marker" id="marker-Annemieke" style="top: 43%; left: 16%;" onclick="askPerson('Annemieke')">‚ùì</div>
  <div class="person-marker" id="marker-Bram"      style="top: 20%; left: 26%;" onclick="askPerson('Bram')">‚ùì</div>
  <div class="person-marker" id="marker-Gerwin"    style="top: 31%; left: 35%;" onclick="askPerson('Gerwin')">‚ùì</div>
  <div class="person-marker" id="marker-Gerrit"    style="top: 31%; left: 43%;" onclick="askPerson('Gerrit')">‚ùì</div>
  <div class="person-marker" id="marker-John"      style="top: 31%; left: 51%;" onclick="askPerson('John')">‚ùì</div>
  <div class="person-marker" id="marker-Jacques"   style="top: 20%; left: 56%;" onclick="askPerson('Jacques')">‚ùì</div>
  <div class="person-marker" id="marker-Ward"      style="top: 9%;  left: 64%;" onclick="askPerson('Ward')">‚ùì</div>
  <div class="person-marker" id="marker-EJ"        style="top: 8%;  left: 72%;" onclick="askPerson('EJ')">‚ùì</div>
  <div class="person-marker" id="marker-Jeroen"    style="top: 31%; left: 74%;" onclick="askPerson('Jeroen')">‚ùì</div>
  <div class="person-marker" id="marker-Simone"    style="top: 32%; left: 79%;" onclick="askPerson('Simone')">‚ùì</div>

  <!-- ---------------- SCRIPT ---------------- -->
  <script>
    const PERSON_QUESTIONS = {
      "Evert":     "Welke afhankelijkheid zie jij deze PI voor Team Everest?",
      "Stef":      "Wat is volgens jou het belangrijkste risico en hoe mitigeren we dat?",
      "Esther":    "Welke verbetering wil je als RTE deze PI stimuleren?",
      "Ronald":    "Wat wordt jouw grootste bijdrage in deze PI en welke support heb je nodig?",
      "Annemieke": "Welke metric vind jij het meest waardevol om te volgen en waarom?",
      "Bram":      "Bram is koning in het spelletje Tetris, hij staat/stond bij de eerste 10 van NL?",
      "Gerwin":    "Gerwin maakt voor een enkele reis naar kantoor meer of minder dan 125 kilometers?",
      "Gerrit":    "Gerrit heeft in 2025 aan meer of minder dan 10 officiele hardloopwedstrijden meegedaan?",
      "John":      "John liep de marathon van Enschede, was zijn tijd netto meer of minder dan 4:40?",
      "Jacques":   "Wat is onze energizer/doel voor vandaag en hoe houden we de vaart erin?",
      "Ward":      "Ward werd 1ste tijdens het ABC 2025, haalde hij meer of minder dan 150 punten?",
      "EJ":        "Welke quick win zie jij die we deze week kunnen oppakken?",
      "Jeroen":    "Welke alignment is nodig met andere ARTs/teams voor succes?",
      "Simone":    "Wie wil je bedanken en waarom, en wat hebben we daarvan geleerd?"
    };

    const ALL_NAMES = Object.keys(PERSON_QUESTIONS);
    const LS_KEY_DONE = "pi26:personen:done";

    function loadDone() {
      try { return JSON.parse(localStorage.getItem(LS_KEY_DONE)) || []; }
      catch { return []; }
    }
    function saveDone(arr) { localStorage.setItem(LS_KEY_DONE, JSON.stringify(arr)); }

    let done = loadDone();

    function setMarkerDone(name, isDone) {
      const el = document.getElementById("marker-" + name);
      if (!el) return;
      el.classList.toggle("done", isDone);
      el.textContent = isDone ? "‚úÖ" : "‚ùì";
    }

    function renderDoneList() {
      document.getElementById("doneList").textContent = done.length ? done.join(", ") : "‚Äî";
    }

    function renderAll() {
      ALL_NAMES.forEach(name => setMarkerDone(name, done.includes(name)));
      renderDoneList();
    }

    function showModal(title, message, onConfirm) {
      const overlay = document.createElement("div");
      overlay.className = "overlay";

      const modal = document.createElement("div");
      modal.className = "modal";

      modal.innerHTML = `
        <h2>${title}</h2>
        <p>${message}</p>
        <div class="row">
          <button class="button">Sluiten</button>
          <button class="button primary">Markeer als geweest ‚úÖ</button>
        </div>
      `;

      modal.querySelector(".button").onclick = () => document.body.removeChild(overlay);
      modal.querySelector(".button.primary").onclick = () => {
        onConfirm?.();
        document.body.removeChild(overlay);
      };

      overlay.appendChild(modal);
      document.body.appendChild(overlay);
    }

    function askPerson(name) {
      // Als iemand al geweest is, toon toch de vraag maar markeer niet dubbel
      const vraag = PERSON_QUESTIONS[name];
      showModal("Vraag over " + name, vraag, () => {
        if (!done.includes(name)) {
          done.push(name);
          saveDone(done);
          renderAll();
        }
      });
    }

    function randomPick() {
      const remaining = ALL_NAMES.filter(n => !done.includes(n));
      if (!remaining.length) {
        // Iedereen is geweest ‚Üí bied reset aan
        showModal("Iedereen is geweest üéâ", "Je kunt resetten voor een nieuwe ronde.", () => {
          // optioneel: bij bevestiging meteen resetProgress uitvoeren
          resetProgress();
        });
        return;
      }
      // Kies willekeurig uit de overgebleven namen
      const name = remaining[Math.floor(Math.random() * remaining.length)];
      // Highlight de marker kort (visueel feedback)
      const el = document.getElementById("marker-" + name);
      if (el) {
        el.style.transform = "scale(1.35)";
        setTimeout(() => { el.style.transform = ""; }, 450);
      }
      askPerson(name);
    }

    function resetProgress() {
      done = [];
      saveDone(done);
      renderAll();
    }

    function resetAll() {
      done = [];
      saveDone(done);
      renderAll();
    }

    // Sneltoets: R voor random pick
    document.addEventListener("keydown", (e) => {
      if (e.key && e.key.toLowerCase() === "r") {
        randomPick();
      }
    });

    // Expose functies voor onclick
    window.askPerson = askPerson;
    window.randomPick = randomPick;
    window.resetProgress = resetProgress;
    window.resetAll = resetAll;

    // Init
    renderAll();
  </script>

</body>
</html>
